<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kopi Senja - Kedai Kopi Hangat</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY"></script>
  <style>
    /* CSS Variables for Coffee Shop colors */
    :root {
      --color-dark-brown: #4A2C2A; /* Dark coffee brown */
      --color-light-cream: #F5EFE6; /* Light cream */
      --color-medium-brown: #8B4513; /* Saddle Brown */
      --color-white: #ffffff;
      --color-gray-light: #f0f0f0;
      --color-gray-medium: #b0b0b0;
      --color-gray-dark: #333333;
      --font-primary: 'Inter', sans-serif;
      --font-heading: 'Playfair Display', serif;
      --border-radius: 0.75rem;
      --transition-speed: 0.3s;

      /* Text and Background colors */
      --text-primary: var(--color-gray-dark);
      --text-secondary: var(--color-gray-medium);
      --bg-primary: var(--color-light-cream);
      --card-bg: var(--color-white);
      --card-shadow: rgba(0,0,0,0.1);
    }

    /* Reset & base */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: var(--font-primary);
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
    }
    a {
      color: var(--color-medium-brown);
      text-decoration: none;
      transition: color var(--transition-speed);
    }
    a:hover,
    a:focus {
      color: var(--color-dark-brown);
      outline: none;
    }
    button {
      font-family: var(--font-primary);
      cursor: pointer;
      border: none;
      outline: none;
      transition: background-color var(--transition-speed), color var(--transition-speed), transform var(--transition-speed);
      border-radius: var(--border-radius);
    }
    button:focus-visible {
      outline: 2px solid var(--color-medium-brown);
      outline-offset: 2px;
    }
    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: var(--color-gray-light);
      border-radius: var(--border-radius);
    }
    ::-webkit-scrollbar-thumb {
      background: var(--color-dark-brown);
      border-radius: var(--border-radius);
    }

    /* Container and layout */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    /* HEADER & NAVIGATION */
    header {
      position: sticky;
      top: 0;
      background: var(--color-dark-brown);
      color: var(--color-white);
      z-index: 999;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      user-select: none;
    }
    .nav-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 64px;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }
    .logo {
      font-family: var(--font-heading);
      font-weight: 700;
      font-size: 1.8rem;
      letter-spacing: 0.05em;
      color: var(--color-light-cream);
      user-select: text;
    }
    nav ul {
      list-style: none;
      display: flex;
      gap: 1.5rem;
      margin: 0;
      padding: 0;
    }
    nav ul li {
      position: relative;
    }
    nav ul li a {
      color: var(--color-white);
      font-weight: 600;
      font-size: 1rem;
      padding: 0.5rem 0;
      display: inline-block;
      transition: color var(--transition-speed);
    }
    nav ul li a.active,
    nav ul li a:hover,
    nav ul li a:focus {
      color: var(--color-light-cream);
      transform: scale(1.05);
    }
    .nav-right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .btn-login {
      background: var(--color-light-cream);
      color: var(--color-dark-brown);
      padding: 0.4rem 1rem;
      font-weight: 600;
      border-radius: var(--border-radius);
      box-shadow: 0 2px 8px rgba(245, 239, 230, 0.5);
      transition: background-color var(--transition-speed), color var(--transition-speed), transform var(--transition-speed);
    }
    .btn-login:hover,
    .btn-login:focus {
      background: #e0d8cc;
      color: var(--color-dark-brown);
      transform: scale(1.05);
    }

    /* MAIN LAYOUT */
    main {
      padding: 2rem 0 4rem;
      min-height: calc(100vh - 64px);
    }
    section {
      margin-bottom: 4rem;
    }
    h1, h2, h3, h4 {
      margin-top: 0;
      margin-bottom: 0.75rem;
      font-weight: 700;
      font-family: var(--font-heading);
      color: var(--color-dark-brown);
      user-select: text;
    }
    h1 {
      font-size: 2.8rem;
      letter-spacing: 0.03em;
    }
    h2 {
      font-size: 1.75rem;
      border-bottom: 3px solid var(--color-medium-brown);
      padding-bottom: 0.2rem;
      width: fit-content;
      margin-bottom: 1.5rem;
    }
    h3 {
      font-size: 1.2rem;
      color: var(--color-gray-dark);
    }
    p {
      color: var(--text-secondary);
      font-size: 1rem;
      margin: 0 0 1.5rem;
    }

    /* CARDS */
    .card {
      background: var(--card-bg);
      box-shadow: 0 2px 8px var(--card-shadow);
      border-radius: var(--border-radius);
      padding: 1rem 1.5rem;
      transition: box-shadow var(--transition-speed);
      display: flex;
      flex-direction: column;
    }
    .card:hover {
      box-shadow: 0 6px 20px rgba(74, 44, 42, 0.15);
    }
    .card-header {
      font-weight: 700;
      font-size: 1.125rem;
      margin-bottom: 0.75rem;
      color: var(--color-dark-brown);
      user-select: text;
    }

    /* DASHBOARD */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
      gap: 1.5rem;
    }
    .status-cards {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin-top: 1rem;
    }
    .status-card {
      background: var(--card-bg);
      border-radius: var(--border-radius);
      box-shadow: 0 2px 8px var(--card-shadow);
      padding: 1rem 1.25rem;
      flex: 1 1 160px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      color: var(--color-dark-brown);
      user-select: none;
      transition: box-shadow var(--transition-speed);
    }
    .status-card:hover {
      box-shadow: 0 6px 18px rgba(74, 44, 42, 0.2);
    }
    .status-title {
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 0.35rem;
    }
    .status-value {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--color-medium-brown);
      user-select: text;
    }
    .info-quick {
      background: var(--color-dark-brown);
      color: var(--color-white);
      border-radius: var(--border-radius);
      padding: 1.25rem 1.5rem;
      font-size: 1rem;
      min-height: 4.5rem;
      user-select: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    /* TABLES */
    table {
      border-collapse: collapse;
      width: 100%;
      background: var(--card-bg);
      border-radius: var(--border-radius);
      box-shadow: 0 2px 8px var(--card-shadow);
      overflow: hidden;
      user-select: none;
      margin-bottom: 1rem;
    }
    thead {
      background: var(--color-dark-brown);
      color: var(--color-white);
    }
    th, td {
      padding: 0.7rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--color-gray-light);
      font-size: 0.9rem;
    }
    tbody tr:last-child td {
      border-bottom: none;
    }
    tbody tr:hover {
      background: var(--color-gray-light);
      cursor: pointer;
    }
    /* Table header filters */
    .filter-row input,
    .filter-row select {
      width: 100%;
      padding: 0.3rem 0.5rem;
      font-size: 0.85rem;
      border: 1px solid var(--color-gray-medium);
      border-radius: var(--border-radius);
      transition: border-color var(--transition-speed);
    }
    .filter-row input:focus,
    .filter-row select:focus {
      border-color: var(--color-medium-brown);
      outline: none;
    }

    /* Form inputs */
    input, select {
      font-family: var(--font-primary);
      font-size: 1rem;
      border-radius: var(--border-radius);
      border: 1px solid var(--color-gray-medium);
      padding: 0.5rem 0.75rem;
      color: var(--text-primary);
      transition: border-color var(--transition-speed);
      width: 100%;
      max-width: 300px;
      margin-bottom: 1rem;
    }
    input:focus, select:focus {
      border-color: var(--color-medium-brown);
      outline: none;
    }

    /* Buttons */
    .btn {
      background: var(--color-dark-brown);
      color: var(--color-white);
      padding: 0.5rem 1rem;
      font-weight: 600;
      border-radius: var(--border-radius);
      box-shadow: 0 3px 10px rgba(74, 44, 42, 0.3);
      transition: background-color var(--transition-speed), transform var(--transition-speed);
      user-select: none;
      white-space: nowrap;
    }
    .btn:hover,
    .btn:focus {
      background: var(--color-medium-brown);
      color: var(--color-white);
      transform: scale(1.05);
    }
    .btn[disabled] {
      background: var(--color-gray-medium);
      cursor: not-allowed;
      box-shadow: none;
      transform: none;
    }
    .btn-export {
      background: var(--color-medium-brown);
      color: var(--color-white);
      box-shadow: 0 3px 10px rgba(139, 69, 19, 0.5);
    }
    .btn-export:hover,
    .btn-export:focus {
      background: #a0522d; /* Sienna */
    }

    /* Order button */
    .btn-order {
      background: var(--color-medium-brown);
      color: var(--color-white);
      padding: 0.3rem 0.75rem;
      font-size: 0.85rem;
      font-weight: 600;
      transition: all 0.2s;
    }
    .btn-order:hover {
      background: var(--color-dark-brown);
      transform: scale(1.05);
    }

    /* Chart container */
    .chart-container {
      width: 100%;
      height: 280px;
      user-select: none;
    }

    /* Notification badge */
    .notification-icon {
      position: relative;
      cursor: pointer;
      user-select: none;
    }
    .notification-icon svg {
      width: 24px;
      height: 24px;
      fill: var(--color-white);
      transition: fill var(--transition-speed);
    }
    .notification-icon:hover svg,
    .notification-icon:focus svg {
      fill: var(--color-light-cream);
      outline: none;
    }
    .notification-badge {
      position: absolute;
      top: -6px;
      right: -6px;
      background: var(--color-light-cream);
      color: var(--color-dark-brown);
      border-radius: 50%;
      font-weight: 700;
      font-size: 0.75rem;
      width: 18px;
      height: 18px;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      user-select: none;
    }

    /* Responsive Grid for different sections */
    .flex-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      align-items: center;
    }
    .flex-grow {
      flex-grow: 1;
    }

    /* Interactive map container */
    #map {
      height: 400px;
      width: 100%;
      border-radius: var(--border-radius);
      box-shadow: 0 2px 12px var(--card-shadow);
      user-select: none;
    }

    /* SPA Pages */
    section.page {
      display: none;
      animation: fadeIn 0.5s ease forwards;
    }
    section.page.active {
      display: block;
    }

    /* Order modal */
    textarea {
      width: 100%;
      border: 1px solid var(--color-gray-medium);
      border-radius: var(--border-radius);
      padding: 0.5rem;
      font-family: var(--font-primary);
      margin-bottom: 1rem;
      resize: vertical;
    }
    
    /* Login modal */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--transition-speed);
    }
    .modal.active {
      opacity: 1;
      pointer-events: auto;
    }
    .modal-content {
      background: var(--color-white);
      border-radius: var(--border-radius);
      width: 320px;
      padding: 2rem;
      box-shadow: 0 6px 24px rgba(0,0,0,0.2);
      user-select: text;
      position: relative;
    }
    .modal-content h2 {
      margin-bottom: 1rem;
      color: var(--color-dark-brown);
      font-size: 1.5rem;
    }
    .modal-close {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      background: transparent;
      border: none;
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--color-gray-dark);
      cursor: pointer;
      transition: color var(--transition-speed);
    }
    .modal-close:hover, .modal-close:focus {
      color: var(--color-medium-brown);
      outline: none;
    }

    /* Fade in animation */
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }

    /* Misc */
    .text-center {
      text-align: center;
    }
    .mt-1 { margin-top: 1rem; }
    .mb-1 { margin-bottom: 1rem; }
    .mb-2 { margin-bottom: 2rem; }

    /* Container Queries for responsiveness */
    @container (min-width: 600px) {
      .chart-container {
        height: 320px;
      }
    }
  </style>
</head>
<body>
<header>
  <div class="nav-container" role="navigation" aria-label="Main navigation">
    <div class="logo" tabindex="0">Kopi Senja</div>
    <nav>
      <ul>
        <li><a href="#" class="nav-link active" data-page="dashboard" tabindex="0">Beranda</a></li>
        <li><a href="#" class="nav-link" data-page="menu" tabindex="0">Menu</a></li>
        <li><a href="#" class="nav-link" data-page="location" tabindex="0">Lokasi</a></li>
        <li><a href="#" class="nav-link" data-page="promo" tabindex="0">Promo</a></li>
        <li><a href="#" class="nav-link" data-page="reviews" tabindex="0">Ulasan</a></li>
      </ul>
    </nav>
    <div class="nav-right">
      <div class="notification-icon" tabindex="0" aria-label="Notifikasi Pesanan atau Promo">
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6V11c0-3.07-1.63-5.64-4.5-6.32V4a1.5 1.5 0 0 0-3 0v.68C7.62 5.36 6 7.92 6 11v5l-1.7 1.7a.996.996 0 0 0 .7 1.7h14a1 1 0 0 0 .7-1.7L18 16z"/></svg>
        <span class="notification-badge" aria-live="polite" aria-atomic="true" id="notif-count">2</span>
      </div>
      <button class="btn-login" id="btn-login" aria-haspopup="dialog" aria-controls="login-modal" aria-expanded="false">Login</button>
    </div>
  </div>
</header>

<main>
  <!-- Beranda (Dashboard) -->
  <section id="dashboard" class="page active" role="main" aria-label="Beranda Kopi Senja">
    <div class="container">
      <h1>Selamat Datang di Kopi Senja</h1>
      <p>Nikmati secangkir kehangatan dan suasana nyaman di kedai kopi kami. Kami menyajikan kopi pilihan terbaik dari biji kopi lokal dan internasional.</p>

      <div class="dashboard-grid" style="margin-top:2rem;">
        <div class="card" aria-label="Grafik Penjualan Menu Terlaris">
          <div class="card-header">Menu Terlaris Bulan Ini</div>
          <div class="chart-container">
            <canvas id="bestSellerChart" aria-describedby="bestSellerChartDesc"></canvas>
            <p id="bestSellerChartDesc" class="sr-only">Grafik batang menunjukkan penjualan menu kopi terlaris.</p>
          </div>
        </div>

        <div class="card" aria-label="Informasi Harian Kedai">
          <div class="card-header">Informasi Harian</div>
          <div class="status-cards" role="list" aria-label="Informasi penting kedai kopi">
            <div class="status-card" role="listitem" tabindex="0">
              <div class="status-title">Kopi Terjual</div>
              <div class="status-value" id="coffee-sold">120 Cangkir</div>
            </div>
            <div class="status-card" role="listitem" tabindex="0">
              <div class="status-title">Pelanggan Hari Ini</div>
              <div class="status-value" id="daily-customers">75 Orang</div>
            </div>
            <div class="status-card" role="listitem" tabindex="0">
              <div class="status-title">Promo Aktif</div>
              <div class="status-value" id="active-promo">2 Promo</div>
            </div>
            <div class="status-card" role="listitem" tabindex="0">
              <div class="status-title">Barista Bertugas</div>
              <div class="status-value" id="barista-on-duty">3 Orang</div>
            </div>
          </div>
          <div class="info-quick" tabindex="0" aria-live="polite" aria-atomic="true" id="quick-info">
            Nikmati diskon 15% untuk semua minuman es kopi di jam 14:00 - 17:00!
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Menu -->
  <section id="menu" class="page" role="region" aria-label="Daftar Menu Kopi Senja">
    <div class="container">
      <h1>Daftar Menu Kopi Senja</h1>
      <p>Temukan berbagai pilihan kopi, minuman non-kopi, dan makanan ringan yang siap menemani harimu.</p>

      <div style="margin-bottom: 1rem;" class="flex-row">
        <select id="filter-category" aria-label="Filter berdasarkan kategori menu">
          <option value="">Semua Kategori</option>
          <option value="Kopi">Kopi</option>
          <option value="Non-Kopi">Non-Kopi</option>
          <option value="Makanan Ringan">Makanan Ringan</option>
        </select>
        <input type="text" id="search-menu" placeholder="Cari menu..." aria-label="Cari menu berdasarkan nama" />
        <button class="btn" id="btn-filter-menu" aria-label="Terapkan filter menu">Filter</button>
        <button class="btn btn-export" id="btn-export-menu" aria-label="Unduh daftar menu">Unduh Menu</button>
      </div>

      <table aria-describedby="menuTableDesc" id="menu-table" role="grid">
        <caption id="menuTableDesc" class="sr-only">Tabel daftar menu kopi, minuman non-kopi, dan makanan ringan</caption>
        <thead>
          <tr>
            <th>Nama Menu</th>
            <th>Kategori</th>
            <th>Harga</th>
            <th>Deskripsi</th>
          </tr>
        </thead>
        <tbody>
          <!-- Rows populated by JS -->
        </tbody>
      </table>

      <div class="chart-container">
        <canvas id="menuPopularityChart" aria-describedby="menuPopularityChartDesc"></canvas>
        <p id="menuPopularityChartDesc" class="sr-only">Grafik popularitas menu berdasarkan kategori.</p>
      </div>
    </div>
  </section>

  <!-- Lokasi -->
  <section id="location" class="page" role="region" aria-label="Lokasi Kedai Kopi Senja">
    <div class="container">
      <h1>Lokasi Kedai Kopi Senja</h1>
      <p>Kunjungi kami di alamat berikut untuk pengalaman kopi terbaik.</p>
      <div id="map" tabindex="0" aria-label="Google Maps Interaktif Lokasi Kedai Kopi Senja"></div>
      <p class="mt-1"><strong>Alamat:</strong> Jl. Kopi Nikmat No. 123, Kota Bahagia, 12345</p>
      <p><strong>Jam Buka:</strong> Setiap Hari, 08:00 - 22:00</p>
    </div>
  </section>

  <!-- Promo -->
  <section id="promo" class="page" role="region" aria-label="Halaman Promo">
    <div class="container">
      <h1>Promo Spesial Kopi Senja</h1>
      <p>Jangan lewatkan penawaran menarik dari kami!</p>

      <table aria-describedby="promoTableDesc" id="promo-table" role="grid">
        <caption id="promoTableDesc" class="sr-only">Tabel daftar promo spesial kedai kopi</caption>
        <thead>
          <tr>
            <th>Nama Promo</th>
            <th>Deskripsi</th>
            <th>Berlaku Hingga</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <!-- Rows populated by JS -->
        </tbody>
      </table>
    </div>
  </section>

  <!-- Ulasan Pelanggan -->
  <section id="reviews" class="page" role="region" aria-label="Ulasan Pelanggan">
    <div class="container">
      <h1>Ulasan Pelanggan</h1>
      <p>Apa kata mereka tentang Kopi Senja?</p>
      <table aria-describedby="reviewsTableDesc" id="reviews-table" role="grid">
        <caption id="reviewsTableDesc" class="sr-only">Tabel ulasan pelanggan tentang kedai kopi</caption>
        <thead>
          <tr>
            <th>Tanggal</th>
            <th>Nama Pelanggan</th>
            <th>Rating</th>
            <th>Ulasan</th>
          </tr>
        </thead>
        <tbody>
          <!-- Rows populated by JS -->
        </tbody>
      </table>
    </div>
  </section>
</main>

<!-- Order Modal -->
<div class="modal" id="order-modal" role="dialog" aria-modal="true" aria-labelledby="order-title" tabindex="-1" aria-hidden="true">
  <div class="modal-content" style="width: 400px;">
    <button class="modal-close" id="close-order" aria-label="Tutup modal pesanan">&times;</button>
    <h2 id="order-title">Pesan Sekarang</h2>
    <form id="order-form">
      <div class="order-summary mb-1">
        <h4>Pesanan Anda:</h4>
        <p id="order-item-name"></p>
        <p id="order-item-price"></p>
      </div>
      <label for="order-quantity">Jumlah:</label>
      <input type="number" id="order-quantity" min="1" value="1" />
      <label for="order-notes">Catatan (opsional):</label>
      <textarea id="order-notes" rows="3" placeholder="Contoh: Kurangi gula, tambah es, dll"></textarea>
      <button type="submit" class="btn" style="width: 100%; margin-top: 1rem;">Konfirmasi Pesanan</button>
    </form>
  </div>
</div>

<!-- Login Modal -->
<div class="modal" id="login-modal" role="dialog" aria-modal="true" aria-labelledby="login-title" tabindex="-1" aria-hidden="true">
  <div class="modal-content">
    <button class="modal-close" id="close-login" aria-label="Tutup modal login">&times;</button>
    <h2 id="login-title">Login Admin/Member</h2>
    <form id="login-form" aria-describedby="login-desc">
      <p id="login-desc">Masukkan username dan password untuk masuk ke panel admin atau akun member.</p>
      <label for="username">Username</label><br />
      <input type="text" id="username" name="username" autocomplete="username" required />
      <label for="password">Password</label><br />
      <input type="password" id="password" name="password" autocomplete="current-password" required />
      <button type="submit" class="btn btn-login" style="width: 100%; margin-top: 1.5rem;">Login</button>
    </form>
  </div>
</div>

<!-- Screen reader only utility -->
<style>
  .sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0,0,0,0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }
</style>

<script>
  // SPA page navigation
  const navLinks = document.querySelectorAll('nav ul li a');
  const pages = document.querySelectorAll('section.page');
  navLinks.forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      const targetPage = link.getAttribute('data-page');
      if (!targetPage) return;
      navLinks.forEach(lnk => lnk.classList.remove('active'));
      link.classList.add('active');
      pages.forEach(page => {
        if (page.id === targetPage) page.classList.add('active');
        else page.classList.remove('active');
      });
    });
  });

  // Notification badge count - example dynamic update
  const notifCountEl = document.getElementById('notif-count');
  let notifications = [
    { id: 1, message: 'Pesanan baru #1234', read: false },
    { id: 2, message: 'Promo "Buy 1 Get 1" akan berakhir', read: false },
  ];
  function updateNotificationBadge() {
    const unreadCount = notifications.filter(n => !n.read).length;
    notifCountEl.textContent = unreadCount;
    notifCountEl.style.display = unreadCount > 0 ? 'flex' : 'none';
  }
  updateNotificationBadge();

  // Login modal handling
  const loginModal = document.getElementById('login-modal');
  const btnLogin = document.getElementById('btn-login');
  const btnCloseLogin = document.getElementById('close-login');
  btnLogin.addEventListener('click', () => {
    loginModal.classList.add('active');
    btnLogin.setAttribute('aria-expanded', 'true');
    document.getElementById('username').focus();
  });
  btnCloseLogin.addEventListener('click', closeLoginModal);
  loginModal.addEventListener('click', e => {
    if (e.target === loginModal) {
      closeLoginModal();
    }
  });
  function closeLoginModal() {
    loginModal.classList.remove('active');
    btnLogin.setAttribute('aria-expanded', 'false');
    btnLogin.focus();
  }
  // Order modal handling
  const orderModal = document.getElementById('order-modal');
  const orderForm = document.getElementById('order-form');
  let currentOrderItem = null;

  document.querySelectorAll('.btn-order').forEach(btn => {
    btn.addEventListener('click', () => {
      currentOrderItem = JSON.parse(btn.getAttribute('data-item'));
      document.getElementById('order-item-name').textContent = currentOrderItem.name;
      document.getElementById('order-item-price').textContent = currentOrderItem.price;
      orderModal.classList.add('active');
    });
  });

  document.getElementById('close-order').addEventListener('click', () => {
    orderModal.classList.remove('active');
  });

  document.getElementById('login-form').addEventListener('submit', e => {
    e.preventDefault();
    alert('Fitur login simulasi, sesuaikan implementasi backend.');
    closeLoginModal();
  });

  orderForm.addEventListener('submit', e => {
    e.preventDefault();
    const quantity = document.getElementById('order-quantity').value;
    const notes = document.getElementById('order-notes').value;
    
    alert(`Terima kasih! Pesanan Anda:\n${quantity}x ${currentOrderItem.name}\nTotal: Rp ${parseInt(currentOrderItem.price.replace(/\D/g,'')) * quantity}\nCatatan: ${notes}`);
    
    orderModal.classList.remove('active');
    currentOrderItem = null;
  });

  // Chart data and initialization for Dashboard (Best Seller Chart)
  const bestSellerCtx = document.getElementById('bestSellerChart').getContext('2d');
  const bestSellerChart = new Chart(bestSellerCtx, {
    type: 'bar',
    data: {
      labels: ['Espresso', 'Cappuccino', 'Latte', 'Americano', 'Matcha Latte'],
      datasets: [
        {
          label: 'Jumlah Terjual',
          data: [85, 70, 95, 60, 50],
          backgroundColor: [
            'rgba(74, 44, 42, 0.8)',
            'rgba(139, 69, 19, 0.8)',
            'rgba(74, 44, 42, 0.8)',
            'rgba(139, 69, 19, 0.8)',
            'rgba(74, 44, 42, 0.8)'
          ],
          borderColor: [
            'rgba(74, 44, 42, 1)',
            'rgba(139, 69, 19, 1)',
            'rgba(74, 44, 42, 1)',
            'rgba(139, 69, 19, 1)',
            'rgba(74, 44, 42, 1)'
          ],
          borderWidth: 1
        },
      ]
    },
    options: {
      responsive: true,
      animation: {
        duration: 1000,
      },
      scales: {
        y: {
          beginAtZero: true,
          title: { display: true, text: 'Jumlah Terjual' }
        },
        x: {
          title: { display: true, text: 'Menu Kopi' }
        }
      },
      plugins: {
        legend: { display: false }
      }
    }
  });

  // Menu Popularity Chart
  const menuPopularityCtx = document.getElementById('menuPopularityChart').getContext('2d');
  const menuPopularityChart = new Chart(menuPopularityCtx, {
    type: 'pie',
    data: {
      labels: ['Kopi', 'Non-Kopi', 'Makanan Ringan'],
      datasets: [{
        data: [60, 25, 15], // Example percentages
        backgroundColor: [
          'rgba(74, 44, 42, 0.8)',
          'rgba(139, 69, 19, 0.8)',
          'rgba(245, 239, 230, 0.8)'
        ],
        borderColor: [
          'rgba(74, 44, 42, 1)',
          'rgba(139, 69, 19, 1)',
          'rgba(245, 239, 230, 1)'
        ],
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      animation: {
        duration: 1000
      },
      plugins: {
        legend: {
          position: 'top',
        },
        title: {
          display: true,
          text: 'Distribusi Penjualan per Kategori'
        }
      }
    }
  });

  // Updating status cards with random data (simulate real-time)
  function updateStatusCards() {
    document.getElementById('coffee-sold').textContent = `${Math.floor(Math.random() * 50) + 100} Cangkir`;
    document.getElementById('daily-customers').textContent = `${Math.floor(Math.random() * 30) + 50} Orang`;
    document.getElementById('active-promo').textContent = `${Math.floor(Math.random() * 3) + 1} Promo`;
    document.getElementById('barista-on-duty').textContent = `${Math.floor(Math.random() * 2) + 2} Orang`;
    // Update quick info arbitrarily
    const infos = [
      "Nikmati diskon 15% untuk semua minuman es kopi di jam 14:00 - 17:00!",
      "Hari ini ada promo 'Buy 1 Get 1' untuk Latte ukuran besar!",
      "Jangan lupa coba menu spesial kami: Kopi Senja Signature!",
      "Dapatkan poin reward setiap pembelian di atas Rp 50.000."
    ];
    document.getElementById('quick-info').textContent = infos[Math.floor(Math.random() * infos.length)];
  }
  setInterval(() => {
    updateStatusCards();
  }, 10000);

  // GOOGLE MAPS SETUP
  let map;
  let markers = [];
  function initMap() {
    map = new google.maps.Map(document.getElementById("map"), {
      center: { lat: -6.2088, lng: 106.8456 }, // Example: Jakarta center
      zoom: 15,
      mapTypeControl: false,
      fullscreenControl: false,
    });

    // Example Coffee Shop location
    const coffeeShopLocation = { lat: -6.2088, lng: 106.8456 }; // Replace with actual coordinates
    const marker = new google.maps.Marker({
      position: coffeeShopLocation,
      map,
      title: "Kopi Senja",
      icon: "https://maps.google.com/mapfiles/ms/icons/coffee.png", // Coffee icon
      animation: google.maps.Animation.DROP,
    });

    const infoWindow = new google.maps.InfoWindow({
      content: `<strong>Kopi Senja</strong><br>Jl. Kopi Nikmat No. 123`,
    });

    marker.addListener("click", () => {
      infoWindow.open(map, marker);
    });

    markers.push(marker);
  }

  // Initialize map after window load
  window.onload = () => {
    initMap();
    populateMenuTable();
    populatePromoTable();
    populateReviewsTable();
    updateStatusCards(); // Initial update for dashboard
  };

  // MENU DATA: Example dataset and filtering
  const menuDataSample = [
    { name: 'Espresso', category: 'Kopi', price: 'Rp 25.000', desc: 'Kopi hitam pekat dengan crema tebal.' },
    { name: 'Cappuccino', category: 'Kopi', price: 'Rp 30.000', desc: 'Kopi dengan susu kukus dan busa tebal.' },
    { name: 'Latte', category: 'Kopi', price: 'Rp 32.000', desc: 'Kopi dengan susu kukus dan sedikit busa.' },
    { name: 'Americano', category: 'Kopi', price: 'Rp 28.000', desc: 'Espresso yang diencerkan dengan air panas.' },
    { name: 'Matcha Latte', category: 'Non-Kopi', price: 'Rp 35.000', desc: 'Minuman teh hijau matcha dengan susu.' },
    { name: 'Chocolate Frappe', category: 'Non-Kopi', price: 'Rp 38.000', desc: 'Minuman coklat dingin diblender dengan es.' },
    { name: 'Croissant', category: 'Makanan Ringan', price: 'Rp 20.000', desc: 'Roti pastry renyah.' },
    { name: 'Brownies', category: 'Makanan Ringan', price: 'Rp 25.000', desc: 'Kue coklat padat dan fudgy.' },
  ];

  function populateMenuTable(filteredData) {
    const tbody = document.querySelector('#menu-table tbody');
    tbody.innerHTML = '';
    const data = filteredData || menuDataSample;
    data.forEach(row => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${row.name}</td>
        <td>${row.category}</td>
        <td>${row.price}</td>
        <td>${row.desc}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  document.getElementById('btn-filter-menu').addEventListener('click', () => {
    const filterCategory = document.getElementById('filter-category').value;
    const searchKeyword = document.getElementById('search-menu').value.toLowerCase();
    let filtered = menuDataSample;

    if (filterCategory) {
      filtered = filtered.filter(d => d.category === filterCategory);
    }
    if (searchKeyword) {
      filtered = filtered.filter(d => d.name.toLowerCase().includes(searchKeyword) || d.desc.toLowerCase().includes(searchKeyword));
    }
    populateMenuTable(filtered);
  });

  // Export menu data to CSV (simple CSV download)
  document.getElementById('btn-export-menu').addEventListener('click', () => {
    exportTableToCSV('daftar_menu_kopi_senja.csv', document.getElementById('menu-table'));
  });

  // PROMO sample data
  const promoDataSample = [
    { name:'Diskon Es Kopi', desc:'Diskon 15% untuk semua minuman es kopi', validUntil:'30 Juni 2024', status:'Aktif' },
    { name:'Buy 1 Get 1 Latte', desc:'Beli 1 Latte ukuran besar gratis 1', validUntil:'15 Juli 2024', status:'Aktif' },
    { name:'Paket Hemat Sarapan', desc:'Kopi + Croissant hanya Rp 40.000', validUntil:'31 Mei 2024', status:'Berakhir' },
  ];
  function populatePromoTable(filteredData) {
    const tbody = document.querySelector('#promo-table tbody');
    tbody.innerHTML = '';
    const data = filteredData || promoDataSample;
    data.forEach(row => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${row.name}</td>
        <td>${row.desc}</td>
        <td>${row.validUntil}</td>
        <td>${row.status}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  // REVIEWS sample data
  const reviewsDataSample = [
    { date:'2024-06-01', customer:'Andi S.', rating:'5 Bintang', review:'Kopi Lattenya enak banget, tempatnya nyaman!' },
    { date:'2024-05-28', customer:'Budi P.', rating:'4 Bintang', review:'Pelayanan cepat, tapi agak ramai di jam sibuk.' },
    { date:'2024-05-20', customer:'Citra D.', rating:'5 Bintang', review:'Suka banget sama suasana dan pilihan makanannya.' },
  ];
  function populateReviewsTable() {
    const tbody = document.querySelector('#reviews-table tbody');
    tbody.innerHTML = '';
    reviewsDataSample.forEach(row => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${row.date}</td>
        <td>${row.customer}</td>
        <td>${row.rating}</td>
        <td>${row.review}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  // Export table to CSV utility function
  function exportTableToCSV(filename, table) {
    let csv = [];
    for (let row of table.rows) {
      const cols = Array.from(row.cells).map(cell => {
        // Escape commas and quotes
        let txt = cell.textContent.replace(/"/g,'""');
        if (txt.indexOf(',') >= 0 || txt.indexOf('"') >= 0) txt = `"${txt}"`;
        return txt;
      });
      csv.push(cols.join(','));
    }
    const csvString = csv.join('\n');
    const blob = new Blob([csvString], { type: 'text/csv' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.setAttribute('hidden','');
    a.setAttribute('href', url);
    a.setAttribute('download', filename);
    document.body.appendChild(a);
    a.click();
    a.remove();
    window.URL.revokeObjectURL(url);
  }
</script>
</body>
</html>
